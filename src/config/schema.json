{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "type": "object",
  "required": ["profile", "version"],
  "properties": {
    "profile": {
      "type": "string",
      "description": "Profile name"
    },
    "version": {
      "type": "string",
      "pattern": "^\\d+\\.\\d+\\.\\d+$",
      "description": "Profile version (semver)"
    },
    "description": {
      "type": "string"
    },
    "python": {
      "type": "object",
      "properties": {
        "registryType": {
          "type": "string",
          "enum": ["public", "artifactory", "custom"]
        },
        "indexUrl": {
          "type": "string"
        },
        "trustedHost": {
          "type": ["string", "null"]
        },
        "extraIndexUrl": {
          "type": ["string", "null"]
        },
        "requiresAuth": {
          "type": "boolean"
        },
        "authType": {
          "type": "string",
          "enum": ["basic", "token"]
        }
      },
      "required": ["registryType"]
    },
    "node": {
      "type": "object",
      "properties": {
        "registryType": {
          "type": "string",
          "enum": ["public", "artifactory", "custom"]
        },
        "registry": {
          "type": "string"
        },
        "requiresAuth": {
          "type": "boolean"
        }
      },
      "required": ["registryType"]
    },
    "mcp": {
      "type": "object",
      "properties": {
        "enabled": {
          "type": "boolean"
        },
        "autoStart": {
          "type": "boolean"
        },
        "idleTimeout": {
          "type": "number",
          "minimum": 0
        },
        "servers": {
          "type": "object",
          "description": "MCP server configurations",
          "patternProperties": {
            "^[a-zA-Z0-9_-]+$": {
              "type": "object",
              "required": ["enabled"],
              "properties": {
                "enabled": {
                  "type": "boolean",
                  "description": "Whether this server is enabled"
                },
                "type": {
                  "type": "string",
                  "enum": ["built-in", "external"],
                  "default": "built-in",
                  "description": "Server type: built-in (custom) or external (npm/community)"
                },
                "path": {
                  "type": "string",
                  "description": "For built-in servers: path to server file (use 'built-in' for auto-resolve)"
                },
                "command": {
                  "type": "string",
                  "description": "For external servers: command to run (e.g., 'npx', 'node', 'docker')"
                },
                "args": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "For external servers: command arguments"
                },
                "env": {
                  "type": "object",
                  "description": "Environment variables for the server process",
                  "patternProperties": {
                    "^[A-Z_][A-Z0-9_]*$": {
                      "type": "string"
                    }
                  }
                },
                "allowedTools": {
                  "type": "array",
                  "items": {
                    "type": "string"
                  },
                  "description": "Whitelist of allowed tools. If not specified, all tools are allowed."
                },
                "workingDir": {
                  "type": "string",
                  "description": "Working directory for the server process"
                }
              }
            }
          }
        }
      }
    },
    "llm": {
      "type": "object",
      "description": "LLM (Language Model) configuration for AI agents",
      "properties": {
        "enabled": {
          "type": "boolean",
          "description": "Whether LLM integration is enabled"
        },
        "provider": {
          "type": "string",
          "enum": ["anthropic", "openai"],
          "description": "LLM provider to use"
        },
        "model": {
          "type": "string",
          "description": "Model name (e.g., 'claude-3-5-sonnet-20241022', 'gpt-4')"
        },
        "apiKeyEnv": {
          "type": "string",
          "description": "Environment variable name containing the API key"
        },
        "pricing": {
          "type": "object",
          "description": "Pricing information for cost estimation",
          "properties": {
            "inputTokensPer1M": {
              "type": "number",
              "description": "Cost per 1M input tokens in USD"
            },
            "outputTokensPer1M": {
              "type": "number",
              "description": "Cost per 1M output tokens in USD"
            }
          }
        },
        "maxTokens": {
          "type": "number",
          "description": "Default max tokens for completions",
          "default": 4096
        },
        "temperature": {
          "type": "number",
          "description": "Default temperature for completions",
          "minimum": 0,
          "maximum": 1,
          "default": 0.7
        }
      }
    },
    "branding": {
      "type": "object",
      "description": "Company branding and theming configuration",
      "properties": {
        "theme": {
          "type": "string",
          "description": "Theme name (default, example-company, or custom path)",
          "default": "default"
        },
        "customStylesPath": {
          "type": ["string", "null"],
          "description": "Path to custom global stylesheet (relative or absolute)"
        },
        "companyName": {
          "type": ["string", "null"],
          "description": "Company name for branding"
        },
        "logoPath": {
          "type": ["string", "null"],
          "description": "Path to company logo"
        },
        "faviconPath": {
          "type": ["string", "null"],
          "description": "Path to favicon"
        }
      }
    }
  }
}
